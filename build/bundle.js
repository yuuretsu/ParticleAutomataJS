var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function c(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function g(t,e){t.value=null==e?"":e}function $(t,e,n){t.classList[n?"add":"remove"](e)}let y;function x(t){y=t}function b(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.after_update.push(t)}function v(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const w=[],k=[],S=[],M=[],_=Promise.resolve();let C=!1;function j(t){S.push(t)}function P(t){M.push(t)}let N=!1;const A=new Set;function E(){if(!N){N=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];x(e),F(e.$$)}for(x(null),w.length=0;k.length;)k.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];A.has(e)||(A.add(e),e())}S.length=0}while(w.length);for(;M.length;)M.pop()();C=!1,N=!1,A.clear()}}function F(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const L=new Set;let B;function q(t,e){t&&t.i&&(L.delete(t),t.i(e))}function I(t,e,n,o){if(t&&t.o){if(L.has(t))return;L.add(t),B.c.push((()=>{L.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const O="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function R(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function T(t){t&&t.c()}function W(t,n,l,r){const{fragment:c,on_mount:i,on_destroy:a,after_update:u}=t.$$;c&&c.m(n,l),r||j((()=>{const n=i.map(e).filter(s);a?a.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(j)}function U(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,e){-1===t.$$.dirty[0]&&(w.push(t),C||(C=!0,_.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(e,s,l,r,c,i,u,f=[-1]){const h=y;x(e);const d=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:s.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:s.target||h.$$.root};u&&u(d.root);let p=!1;if(d.ctx=l?l(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=s)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](s),p&&z(e,t)),n})):[],d.update(),p=!0,o(d.before_update),d.fragment=!!r&&r(d.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);d.fragment&&d.fragment.l(t),t.forEach(a)}else d.fragment&&d.fragment.c();s.intro&&q(e.$$.fragment),W(e,s.target,s.anchor,s.customElement),E()}x(h)}class Y{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(e){let n,o,s;return{c(){n=u("canvas"),p(n,"width",e[0]),p(n,"height",e[1]),p(n,"class","svelte-6utq4t")},m(t,l){i(t,n,l),e[12](n),o||(s=d(n,"click",e[11]),o=!0)},p(t,[e]){1&e&&p(n,"width",t[0]),2&e&&p(n,"height",t[1])},i:t,o:t,d(t){t&&a(n),e[12](null),o=!1,s()}}}function G(t,e,n){let o,{width:s}=e,{height:l}=e,{links:r}=e,{fields:c}=e,{fw:i}=e,{fh:a}=e,{r:u}=e,{colors:f}=e,{drawConnections:h=!0}=e,{changeFormBySpeed:d=!0}=e;return b((()=>{function t(t){const n=Math.atan2(t.y-t.lastY,t.x-t.lastX),o=Math.hypot(t.x-t.lastX,t.y-t.lastY);e.fillStyle=f[t.type]||"white",e.beginPath(),e.ellipse(t.x,t.y,Math.min(u*(Math.pow(o,2)+1),10),u,n,0,2*Math.PI),e.fill()}const e=o.getContext("2d");if(e.fillStyle="#141e46",e.fillRect(0,0,s,l),h)for(let t=0;t<r.length;t++){const n=r[t].a,o=r[t].b;e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(o.x,o.y);const s=e.createLinearGradient(n.x,n.y,o.x,o.y);s.addColorStop(0,f[n.type]),s.addColorStop(1,f[o.type]),e.strokeStyle=s,e.lineWidth=Math.max(2*u-Math.hypot(n.x-o.x,n.y-o.y)/4,2),e.stroke()}for(let o=0;o<i;o++)for(let s=0;s<a;s++){const l=c[o][s];for(let o=0;o<l.length;o++){const s=l[o];d?t(s):(n=s,e.fillStyle=f[n.type]||"white",e.beginPath(),e.arc(n.x,n.y,u,0,2*Math.PI),e.fill())}}var n})),t.$$set=t=>{"width"in t&&n(0,s=t.width),"height"in t&&n(1,l=t.height),"links"in t&&n(3,r=t.links),"fields"in t&&n(4,c=t.fields),"fw"in t&&n(5,i=t.fw),"fh"in t&&n(6,a=t.fh),"r"in t&&n(7,u=t.r),"colors"in t&&n(8,f=t.colors),"drawConnections"in t&&n(9,h=t.drawConnections),"changeFormBySpeed"in t&&n(10,d=t.changeFormBySpeed)},[s,l,o,r,c,i,a,u,f,h,d,function(e){v.call(this,t,e)},function(t){k[t?"unshift":"push"]((()=>{o=t,n(2,o)}))}]}class D extends Y{constructor(t){super(),X(this,t,G,H,l,{width:0,height:1,links:3,fields:4,fw:5,fh:6,r:7,colors:8,drawConnections:9,changeFormBySpeed:10})}}function K(e){let n,s,l,r,$,y,x,b,v;return{c(){n=u("label"),s=u("div"),l=f(e[1]),r=f(": "),$=f(e[0]),y=h(),x=u("input"),p(s,"class","svelte-i58ql1"),p(x,"type","range"),p(x,"min",e[2]),p(x,"max",e[3]),p(x,"step",e[4]),p(x,"class","svelte-i58ql1"),p(n,"class","wrapper svelte-i58ql1")},m(t,o){i(t,n,o),c(n,s),c(s,l),c(s,r),c(s,$),c(n,y),c(n,x),g(x,e[0]),b||(v=[d(x,"change",e[5]),d(x,"input",e[5])],b=!0)},p(t,[e]){2&e&&m(l,t[1]),1&e&&m($,t[0]),4&e&&p(x,"min",t[2]),8&e&&p(x,"max",t[3]),16&e&&p(x,"step",t[4]),1&e&&g(x,t[0])},i:t,o:t,d(t){t&&a(n),b=!1,o(v)}}}function J(t,e,n){let{name:o}=e,{min:s=0}=e,{max:l=100}=e,{value:r=s}=e,{step:c=1}=e;return t.$$set=t=>{"name"in t&&n(1,o=t.name),"min"in t&&n(2,s=t.min),"max"in t&&n(3,l=t.max),"value"in t&&n(0,r=t.value),"step"in t&&n(4,c=t.step)},[r,o,s,l,c,function(){r=function(t){return""===t?null:+t}(this.value),n(0,r)}]}class Q extends Y{constructor(t){super(),X(this,t,J,K,l,{name:1,min:2,max:3,value:0,step:4})}}function V(e){let n,o,s,l,r,g,$;return{c(){n=u("label"),o=u("input"),s=h(),l=u("span"),r=f(e[1]),p(o,"type","checkbox"),p(o,"class","svelte-clhrbh"),p(l,"class","svelte-clhrbh"),p(n,"class","svelte-clhrbh")},m(t,a){i(t,n,a),c(n,o),o.checked=e[0],c(n,s),c(n,l),c(l,r),g||($=d(o,"change",e[2]),g=!0)},p(t,[e]){1&e&&(o.checked=t[0]),2&e&&m(r,t[1])},i:t,o:t,d(t){t&&a(n),g=!1,$()}}}function Z(t,e,n){let{title:o}=e,{checked:s=!1}=e;return t.$$set=t=>{"title"in t&&n(1,o=t.title),"checked"in t&&n(0,s=t.checked)},[s,o,function(){s=this.checked,n(0,s)}]}class tt extends Y{constructor(t){super(),X(this,t,Z,V,l,{title:1,checked:0})}}function et(t,e,n){const o=t.slice();return o[3]=e[n],o}function nt(t){let e,n,o,s;function l(){return t[2](t[3])}return{c(){e=u("button"),p(e,"name","color"),p(e,"type","radio"),p(e,"style",n=`background-color: ${t[3][1]};`),p(e,"class","svelte-5i7tqo"),$(e,"selected",t[0]===t[3][0])},m(t,n){i(t,e,n),o||(s=d(e,"click",l),o=!0)},p(o,s){t=o,2&s&&n!==(n=`background-color: ${t[3][1]};`)&&p(e,"style",n),3&s&&$(e,"selected",t[0]===t[3][0])},d(t){t&&a(e),o=!1,s()}}}function ot(e){let n,o=Array(...e[1].entries()),s=[];for(let t=0;t<o.length;t+=1)s[t]=nt(et(e,o,t));return{c(){n=u("div");for(let t=0;t<s.length;t+=1)s[t].c();p(n,"class","wrapper svelte-5i7tqo")},m(t,e){i(t,n,e);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,[e]){if(3&e){let l;for(o=Array(...t[1].entries()),l=0;l<o.length;l+=1){const r=et(t,o,l);s[l]?s[l].p(r,e):(s[l]=nt(r),s[l].c(),s[l].m(n,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=o.length}},i:t,o:t,d(t){t&&a(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(s,t)}}}function st(t,e,n){let{colors:o=[]}=e,{selectedId:s=0}=e;return t.$$set=t=>{"colors"in t&&n(1,o=t.colors),"selectedId"in t&&n(0,s=t.selectedId)},[s,o,t=>n(0,s=t[0])]}class lt extends Y{constructor(t){super(),X(this,t,st,ot,l,{colors:1,selectedId:0})}}const rt=[];var ct={showSettings:{en:"Show settings",ru:"Показать настройки"},hideSettings:{en:"Hide settings",ru:"Скрыть настройки"},copyLink:{en:"Copy link",ru:"Копировать ссылку"},currentWorldSettings:{en:"Current world settings",ru:"Настройки мира"},simulationsPerFrame:{en:"Simulations per frame",ru:"Шагов симуляции за кадр"},temperature:{en:"Temperature",ru:"Температура"},friction:{en:"Anti-friction",ru:"Анти-трение"},killAllParticles:{en:"Kill all particles",ru:"Уничтожить все частицы"},newWorldSettings:{en:"New world settings",ru:"Настройки нового мира"},particleTypesAmount:{en:"Particle types amount",ru:"Кол-во видов (цветов) частиц"},particleCount:{en:"Particle count",ru:"Кол-во частиц"},createNewWorld:{en:"Create new world",ru:"Создать новый мир"},particleBrush:{en:"Particle brush",ru:"Кисть частиц"},graphicalSettings:{en:"Graphical settings",ru:"Настройки просмотра"},drawConnections:{en:"Draw connections",ru:"Отображать соединения"},particleRadius:{en:"Particle radius",ru:"Радиус частицы"},changeFormBySpeed:{en:"Change particle form by speed",ru:"Искажать форму частицы в зависимости от скорости"}};const{window:it}=O;function at(e){let n,o,s;return{c(){n=u("button"),n.textContent=`${e[15](e[16],"showSettings")}`,p(n,"class","svelte-1s4knjn")},m(t,l){i(t,n,l),o||(s=d(n,"click",e[37]),o=!0)},p:t,i:t,o:t,d(t){t&&a(n),o=!1,s()}}}function ut(t){let e,n,s,l,r,f,m,g,$,y,x,b,v,w,S,M,_,C,j,N,A,E,F,L,B,O,z,X,Y,H,G,D,K,J,V,Z,et,nt,ot,st,rt,ct,it,at,ut,ft,ht,dt,pt,mt,gt,$t,yt;function xt(e){t[27](e)}let bt={name:t[15](t[16],"simulationsPerFrame"),min:1,max:100};function vt(e){t[28](e)}void 0!==t[13]&&(bt.value=t[13]),y=new Q({props:bt}),k.push((()=>R(y,"value",xt)));let wt={name:t[15](t[16],"temperature"),min:.1,max:40,step:.1};function kt(e){t[29](e)}void 0!==t[5]&&(wt.value=t[5]),v=new Q({props:wt}),k.push((()=>R(v,"value",vt)));let St={name:t[15](t[16],"friction"),min:0,max:1,step:.01};function Mt(e){t[30](e)}void 0!==t[7]&&(St.value=t[7]),M=new Q({props:St}),k.push((()=>R(M,"value",kt)));let _t={name:t[15](t[16],"particleRadius"),min:3,max:10,step:.01};function Ct(e){t[32](e)}void 0!==t[3]&&(_t.value=t[3]),j=new Q({props:_t}),k.push((()=>R(j,"value",Mt)));let jt={name:t[15](t[16],"particleTypesAmount"),min:1,max:t[17].length};function Pt(e){t[33](e)}void 0!==t[14]&&(jt.value=t[14]),X=new Q({props:jt}),k.push((()=>R(X,"value",Ct)));let Nt={name:t[15](t[16],"particleCount"),min:0,max:5e3};function At(e){t[34](e)}void 0!==t[4]&&(Nt.value=t[4]),G=new Q({props:Nt}),k.push((()=>R(G,"value",Pt)));let Et={colors:t[17].slice(0,t[10].length)};function Ft(e){t[35](e)}void 0!==t[6]&&(Et.selectedId=t[6]),st=new lt({props:Et}),k.push((()=>R(st,"selectedId",At)));let Lt={title:t[15](t[16],"drawConnections")};function Bt(e){t[36](e)}void 0!==t[8]&&(Lt.checked=t[8]),ft=new tt({props:Lt}),k.push((()=>R(ft,"checked",Ft)));let qt={title:t[15](t[16],"changeFormBySpeed")};return void 0!==t[9]&&(qt.checked=t[9]),pt=new tt({props:qt}),k.push((()=>R(pt,"checked",Bt))),{c(){e=u("div"),n=u("div"),s=u("button"),s.textContent=`${t[15](t[16],"hideSettings")}`,l=h(),r=u("button"),r.textContent=`${t[15](t[16],"copyLink")}`,f=h(),m=u("div"),g=u("h2"),g.textContent=`${t[15](t[16],"currentWorldSettings")}`,$=h(),T(y.$$.fragment),b=h(),T(v.$$.fragment),S=h(),T(M.$$.fragment),C=h(),T(j.$$.fragment),A=h(),E=u("div"),F=u("button"),F.textContent=`${t[15](t[16],"killAllParticles")}`,L=h(),B=u("div"),O=u("h2"),O.textContent=`${t[15](t[16],"newWorldSettings")}`,z=h(),T(X.$$.fragment),H=h(),T(G.$$.fragment),K=h(),J=u("div"),V=u("button"),V.textContent=`${t[15](t[16],"createNewWorld")}`,Z=h(),et=u("div"),nt=u("h2"),nt.textContent=`${t[15](t[16],"particleBrush")}`,ot=h(),T(st.$$.fragment),ct=h(),it=u("div"),at=u("h2"),at.textContent=`${t[15](t[16],"graphicalSettings")}`,ut=h(),T(ft.$$.fragment),dt=h(),T(pt.$$.fragment),p(s,"class","svelte-1s4knjn"),p(r,"class","svelte-1s4knjn"),p(n,"class","buttons-row svelte-1s4knjn"),p(e,"class","controls-block svelte-1s4knjn"),p(g,"class","controls-block__title svelte-1s4knjn"),p(F,"class","svelte-1s4knjn"),p(E,"class","buttons-row svelte-1s4knjn"),p(m,"class","controls-block svelte-1s4knjn"),p(O,"class","controls-block__title svelte-1s4knjn"),p(V,"class","svelte-1s4knjn"),p(J,"class","buttons-row svelte-1s4knjn"),p(B,"class","controls-block svelte-1s4knjn"),p(nt,"class","controls-block__title svelte-1s4knjn"),p(et,"class","controls-block svelte-1s4knjn"),p(at,"class","controls-block__title svelte-1s4knjn"),p(it,"class","controls-block svelte-1s4knjn")},m(o,a){i(o,e,a),c(e,n),c(n,s),c(n,l),c(n,r),i(o,f,a),i(o,m,a),c(m,g),c(m,$),W(y,m,null),c(m,b),W(v,m,null),c(m,S),W(M,m,null),c(m,C),W(j,m,null),c(m,A),c(m,E),c(E,F),i(o,L,a),i(o,B,a),c(B,O),c(B,z),W(X,B,null),c(B,H),W(G,B,null),c(B,K),c(B,J),c(J,V),i(o,Z,a),i(o,et,a),c(et,nt),c(et,ot),W(st,et,null),i(o,ct,a),i(o,it,a),c(it,at),c(it,ut),W(ft,it,null),c(it,dt),W(pt,it,null),gt=!0,$t||(yt=[d(s,"click",t[26]),d(r,"click",t[22]),d(F,"click",t[31]),d(V,"click",t[21])],$t=!0)},p(t,e){const n={};!x&&8192&e[0]&&(x=!0,n.value=t[13],P((()=>x=!1))),y.$set(n);const o={};!w&&32&e[0]&&(w=!0,o.value=t[5],P((()=>w=!1))),v.$set(o);const s={};!_&&128&e[0]&&(_=!0,s.value=t[7],P((()=>_=!1))),M.$set(s);const l={};!N&&8&e[0]&&(N=!0,l.value=t[3],P((()=>N=!1))),j.$set(l);const r={};!Y&&16384&e[0]&&(Y=!0,r.value=t[14],P((()=>Y=!1))),X.$set(r);const c={};!D&&16&e[0]&&(D=!0,c.value=t[4],P((()=>D=!1))),G.$set(c);const i={};1024&e[0]&&(i.colors=t[17].slice(0,t[10].length)),!rt&&64&e[0]&&(rt=!0,i.selectedId=t[6],P((()=>rt=!1))),st.$set(i);const a={};!ht&&256&e[0]&&(ht=!0,a.checked=t[8],P((()=>ht=!1))),ft.$set(a);const u={};!mt&&512&e[0]&&(mt=!0,u.checked=t[9],P((()=>mt=!1))),pt.$set(u)},i(t){gt||(q(y.$$.fragment,t),q(v.$$.fragment,t),q(M.$$.fragment,t),q(j.$$.fragment,t),q(X.$$.fragment,t),q(G.$$.fragment,t),q(st.$$.fragment,t),q(ft.$$.fragment,t),q(pt.$$.fragment,t),gt=!0)},o(t){I(y.$$.fragment,t),I(v.$$.fragment,t),I(M.$$.fragment,t),I(j.$$.fragment,t),I(X.$$.fragment,t),I(G.$$.fragment,t),I(st.$$.fragment,t),I(ft.$$.fragment,t),I(pt.$$.fragment,t),gt=!1},d(t){t&&a(e),t&&a(f),t&&a(m),U(y),U(v),U(M),U(j),t&&a(L),t&&a(B),U(X),U(G),t&&a(Z),t&&a(et),U(st),t&&a(ct),t&&a(it),U(ft),U(pt),$t=!1,o(yt)}}}function ft(t){let e,n,s,l,r,f,m,g,y;j(t[24]),n=new D({props:{width:t[0],height:t[1],fields:t[12],links:t[11],fw:t[18],fh:t[19],r:t[3],drawConnections:t[8],changeFormBySpeed:t[9],colors:t[17]}}),n.$on("click",t[25]);const x=[ut,at],b=[];function v(t,e){return t[2]?0:1}return r=v(t),f=b[r]=x[r](t),{c(){e=u("main"),T(n.$$.fragment),s=h(),l=u("div"),f.c(),p(l,"class","controls svelte-1s4knjn"),$(l,"controls_opened",t[2])},m(o,a){i(o,e,a),W(n,e,null),c(e,s),c(e,l),b[r].m(l,null),m=!0,g||(y=d(it,"resize",t[24]),g=!0)},p(t,e){const s={};1&e[0]&&(s.width=t[0]),2&e[0]&&(s.height=t[1]),4096&e[0]&&(s.fields=t[12]),2048&e[0]&&(s.links=t[11]),8&e[0]&&(s.r=t[3]),256&e[0]&&(s.drawConnections=t[8]),512&e[0]&&(s.changeFormBySpeed=t[9]),n.$set(s);let c=r;r=v(t),r===c?b[r].p(t,e):(B={r:0,c:[],p:B},I(b[c],1,1,(()=>{b[c]=null})),B.r||o(B.c),B=B.p,f=b[r],f?f.p(t,e):(f=b[r]=x[r](t),f.c()),q(f,1),f.m(l,null)),4&e[0]&&$(l,"controls_opened",t[2])},i(t){m||(q(n.$$.fragment,t),q(f),m=!0)},o(t){I(n.$$.fragment,t),I(f),m=!1},d(t){t&&a(e),U(n),b[r].d(),g=!1,y()}}}function ht(t,e){t.splice(t.indexOf(e),1)}function dt(e,n,o){let s;let c=window.innerWidth,i=window.innerHeight,a=new URLSearchParams(location.search).get("lang")||"en";let u=!0,f=Number(new URLSearchParams(location.search).get("radius"))||5,h=Number(new URLSearchParams(location.search).get("count"))||750,d=Number(new URLSearchParams(location.search).get("max_dist"))||100,p=Number(new URLSearchParams(location.search).get("temperature"))||4,m=0,g=Number(new URLSearchParams(location.search).get("friction"))||.98,$=!0,y=!0;const x=d*d;let b=c/d+1,v=i/d+1,w=3,k=[],S=[],M=[],_=[],C=[],j=function(e,n=t){let o;const s=new Set;function r(t){if(l(e,t)&&(e=t,o)){const t=!rt.length;for(const t of s)t[1](),rt.push(t,e);if(t){for(let t=0;t<rt.length;t+=2)rt[t][0](rt[t+1]);rt.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(l,c=t){const i=[l,c];return s.add(i),1===s.size&&(o=n(r)||t),l(e),()=>{s.delete(i),0===s.size&&(o(),o=null)}}}}(3);r(e,j,(t=>o(14,s=t)));let P=5;if(location.hash){let t=location.hash.substring(1).split("-"),e=0;N=j,s=~~t[e],A=s,N.set(A),w=s,E(),e++;for(let n=0;n<w;n++)k[n]=Number(t[e])>>2*n&3;e++;for(let n=0;n<w;n++){for(let o=0;o<w;o++)S[n][o]=(Number(t[e])>>2*o&3)-1;e++}for(let n=0;n<w;n++){for(let o=0;o<w;o++)M[n][o]=Number(t[e])>>2*o&3;e++}history.pushState(null,null," ")}else E();var N,A;function E(){o(6,m=0),function(){w=s,k=[],o(10,S=[]),M=[];for(let t=0;t<w;t++){k.push(~~(4*Math.random())),S.push([]),M.push([]);for(let e=0;e<w;e++)S[t].push(Math.floor(3*Math.random()-1)),M[t].push(~~(4*Math.random()))}}(),function(){o(11,_=[]),o(12,C=[]);for(let t=0;t<b;t++){C.push([]);for(let e=0;e<v;e++)C[t].push([])}for(let t=0;t<h;t++)F(Math.random()*c,Math.random()*i,~~(Math.random()*w))}()}function F(t,e,n){let o={x:t,y:e,type:n,sx:0,sy:0,bonds:[]};const s=Math.floor(t/d),l=Math.floor(e/d);C[s][l].push(o)}function L(t,e){const n=t.x-e.x,o=t.y-e.y;let s=n*n+o*o;if(s<x){let n=S[t.type][e.type]/s,o=S[e.type][t.type]/s;if(t.bonds.length<k[t.type]&&e.bonds.length<k[e.type]){if(s<x/4&&-1===t.bonds.indexOf(e)&&-1===e.bonds.indexOf(t)){let n=0;t.bonds.forEach((t=>{t.type===e.type&&n++}));let o=0;e.bonds.forEach((e=>{e.type===t.type&&o++})),n<M[t.type][e.type]&&o<M[e.type][t.type]&&function(t,e){t.bonds.push(e),e.bonds.push(t),_.push({a:t,b:e})}(t,e)}}else-1===t.bonds.indexOf(e)&&-1===e.bonds.indexOf(t)&&(n=1/s,o=1/s);const l=Math.atan2(t.y-e.y,t.x-e.x);s<1&&(s=1),s<f*f*4&&(n=1/s,o=1/s),t.sx+=Math.cos(l)*n*p,t.sy+=Math.sin(l)*n*p,e.sx-=Math.cos(l)*o*p,e.sy-=Math.sin(l)*o*p}}function B(){for(let t=0;t<b;t++)for(let e=0;e<v;e++){const n=C[t][e];for(let t=0;t<n.length;t++){const e=n[t];e.lastX=e.x,e.lastY=e.y,e.x+=e.sx,e.y+=e.sy,e.sx*=g,e.sy*=g;const o=Math.sqrt(e.sx*e.sx+e.sy*e.sy);o>1&&(e.sx/=o,e.sy/=o),e.x<10?(e.sx+=.05*p,e.x<0&&(e.x=-e.x,e.sx*=-.5)):e.x>c-10&&(e.sx-=.05*p,e.x>c&&(e.x=2*c-e.x,e.sx*=-.5)),e.y<10?(e.sy+=.05*p,e.y<0&&(e.y=-e.y,e.sy*=-.5)):e.y>i-10&&(e.sy-=.05*p,e.y>i&&(e.y=2*i-e.y,e.sy*=-.5))}}for(let t=0;t<_.length;t++){const e=_[t],n=e.a,o=e.b,s=n.x-o.x,l=n.y-o.y;let r=s*s+l*l;if(r>x/4)ht(n.bonds,o),ht(o.bonds,n),ht(_,e),t--;else if(r>f*f*4){const t=Math.atan2(n.y-o.y,n.x-o.x),e=-.015;n.sx+=Math.cos(t)*e*p,n.sy+=Math.sin(t)*e*p,o.sx-=Math.cos(t)*e*p,o.sy-=Math.sin(t)*e*p}}for(let t=0;t<b;t++)for(let e=0;e<v;e++){const n=C[t][e];for(let o=0;o<n.length;o++){const s=n[o],l=Math.floor(s.x/d),r=Math.floor(s.y/d);l===t&&r===e||(ht(n,s),C[l][r].push(s))}}for(let t=0;t<b;t++)for(let e=0;e<v;e++){const n=C[t][e];for(let o=0;o<n.length;o++){const s=n[o];for(let t=o+1;t<n.length;t++){L(s,n[t])}if(t<b-1){const n=C[t+1][e];for(let t=0;t<n.length;t++){L(s,n[t])}}if(e<v-1){const n=e+1,o=C[t][n];for(let t=0;t<o.length;t++){L(s,o[t])}if(t<b-1){const e=C[t+1][n];for(let t=0;t<e.length;t++){L(s,e[t])}}}}}}requestAnimationFrame((function t(){for(let t=0;t<P;t++)B();o(12,C=[...C]),window.requestAnimationFrame(t)}));return[c,i,u,f,h,p,m,g,$,y,S,_,C,P,s,function(t,e){const n=ct[e];return Object.keys(n).includes(t)?n[t]:n.en},a,["#fa1414","#c88c64","#50aa8c","#0096e6","#0a14e6","#8200c8","#fa96d2","#828282","green","white"],b,v,j,E,function(){let t="";t+=w;let e=0;for(let t=0;t<w;t++)e|=k[t]<<2*t;t+="-"+e;for(let e=0;e<w;e++){let n=0;for(let t=0;t<w;t++)n|=S[e][t]+1<<2*t;t+="-"+n}for(let e=0;e<w;e++){let n=0;for(let t=0;t<w;t++)n|=M[e][t]<<2*t;t+="-"+n}t=window.location.href+"#"+t;let n=document.createElement("input");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)},F,function(){o(0,c=it.innerWidth),o(1,i=it.innerHeight)},t=>{F(t.clientX+Math.random()-.5,t.clientY+Math.random()-.5,m)},()=>o(2,u=!1),function(t){P=t,o(13,P)},function(t){p=t,o(5,p)},function(t){g=t,o(7,g)},function(t){f=t,o(3,f)},()=>{o(12,C=[]);for(let t=0;t<b;t++){C.push([]);for(let e=0;e<v;e++)C[t].push([])}o(11,_=[])},function(t){s=t,j.set(s)},function(t){h=t,o(4,h)},function(t){m=t,o(6,m)},function(t){$=t,o(8,$)},function(t){y=t,o(9,y)},()=>o(2,u=!0)]}return new class extends Y{constructor(t){super(),X(this,t,dt,ft,l,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
