var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function c(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function g(t,e,n){t.classList[n?"add":"remove"](e)}let y;function x(t){y=t}function b(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.after_update.push(t)}function v(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const w=[],k=[],_=[],C=[],M=Promise.resolve();let S=!1;function j(t){_.push(t)}function P(t){C.push(t)}let E=!1;const A=new Set;function N(){if(!E){E=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];x(e),q(e.$$)}for(x(null),w.length=0;k.length;)k.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];A.has(e)||(A.add(e),e())}_.length=0}while(w.length);for(;C.length;)C.pop()();S=!1,E=!1,A.clear()}}function q(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const L=new Set;let O;function T(t,e){t&&t.i&&(L.delete(t),t.i(e))}function W(t,e,n,o){if(t&&t.o){if(L.has(t))return;L.add(t),O.c.push((()=>{L.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const I="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function R(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function F(t){t&&t.c()}function z(t,n,l,r){const{fragment:c,on_mount:i,on_destroy:a,after_update:u}=t.$$;c&&c.m(n,l),r||j((()=>{const n=i.map(e).filter(s);a?a.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(j)}function U(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(w.push(t),S||(S=!0,M.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(e,s,l,r,c,i,u,f=[-1]){const d=y;x(e);const h=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:s.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:s.target||d.$$.root};u&&u(h.root);let p=!1;if(h.ctx=l?l(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return h.ctx&&c(h.ctx[t],h.ctx[t]=s)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](s),p&&B(e,t)),n})):[],h.update(),p=!0,o(h.before_update),h.fragment=!!r&&r(h.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);h.fragment&&h.fragment.l(t),t.forEach(a)}else h.fragment&&h.fragment.c();s.intro&&T(e.$$.fragment),z(e,s.target,s.anchor,s.customElement),N()}x(d)}class G{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function D(e){let n,o,s;return{c(){n=u("canvas"),p(n,"width",e[0]),p(n,"height",e[1]),p(n,"class","svelte-6utq4t")},m(t,l){i(t,n,l),e[11](n),o||(s=h(n,"click",e[10]),o=!0)},p(t,[e]){1&e&&p(n,"width",t[0]),2&e&&p(n,"height",t[1])},i:t,o:t,d(t){t&&a(n),e[11](null),o=!1,s()}}}function K(t,e,n){let o,{width:s}=e,{height:l}=e,{links:r}=e,{fields:c}=e,{fw:i}=e,{fh:a}=e,{r:u}=e,{colors:f}=e,{drawConnections:d=!0}=e;return b((()=>{const t=o.getContext("2d");if(t.fillStyle="#141e46",t.fillRect(0,0,s,l),d)for(let e=0;e<r.length;e++){const n=r[e].a,o=r[e].b;t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(o.x,o.y);const s=t.createLinearGradient(n.x,n.y,o.x,o.y);s.addColorStop(0,f[n.type]),s.addColorStop(1,f[o.type]),t.strokeStyle=s,t.lineWidth=Math.max(2*u-Math.hypot(n.x-o.x,n.y-o.y)/4,2),t.stroke()}for(let o=0;o<i;o++)for(let s=0;s<a;s++){const l=c[o][s];for(let o=0;o<l.length;o++){const s=l[o];e=s.x,n=s.y,h=s.type,t.fillStyle=f[h]||"white",t.beginPath(),t.arc(e,n,u,0,2*Math.PI),t.fill()}}var e,n,h})),t.$$set=t=>{"width"in t&&n(0,s=t.width),"height"in t&&n(1,l=t.height),"links"in t&&n(3,r=t.links),"fields"in t&&n(4,c=t.fields),"fw"in t&&n(5,i=t.fw),"fh"in t&&n(6,a=t.fh),"r"in t&&n(7,u=t.r),"colors"in t&&n(8,f=t.colors),"drawConnections"in t&&n(9,d=t.drawConnections)},[s,l,o,r,c,i,a,u,f,d,function(e){v.call(this,t,e)},function(t){k[t?"unshift":"push"]((()=>{o=t,n(2,o)}))}]}class X extends G{constructor(t){super(),H(this,t,K,D,l,{width:0,height:1,links:3,fields:4,fw:5,fh:6,r:7,colors:8,drawConnections:9})}}function Y(e){let n,s,l,r,g,y,x,b,v;return{c(){n=u("label"),s=u("div"),l=f(e[1]),r=f(": "),g=f(e[0]),y=d(),x=u("input"),p(s,"class","svelte-i58ql1"),p(x,"type","range"),p(x,"min",e[2]),p(x,"max",e[3]),p(x,"step",e[4]),p(x,"class","svelte-i58ql1"),p(n,"class","wrapper svelte-i58ql1")},m(t,o){i(t,n,o),c(n,s),c(s,l),c(s,r),c(s,g),c(n,y),c(n,x),$(x,e[0]),b||(v=[h(x,"change",e[5]),h(x,"input",e[5])],b=!0)},p(t,[e]){2&e&&m(l,t[1]),1&e&&m(g,t[0]),4&e&&p(x,"min",t[2]),8&e&&p(x,"max",t[3]),16&e&&p(x,"step",t[4]),1&e&&$(x,t[0])},i:t,o:t,d(t){t&&a(n),b=!1,o(v)}}}function J(t,e,n){let{name:o}=e,{min:s=0}=e,{max:l=100}=e,{value:r=s}=e,{step:c=1}=e;return t.$$set=t=>{"name"in t&&n(1,o=t.name),"min"in t&&n(2,s=t.min),"max"in t&&n(3,l=t.max),"value"in t&&n(0,r=t.value),"step"in t&&n(4,c=t.step)},[r,o,s,l,c,function(){r=function(t){return""===t?null:+t}(this.value),n(0,r)}]}class Q extends G{constructor(t){super(),H(this,t,J,Y,l,{name:1,min:2,max:3,value:0,step:4})}}function V(e){let n,o,s,l,r,$,g;return{c(){n=u("label"),o=u("input"),s=d(),l=u("span"),r=f(e[1]),p(o,"type","checkbox"),p(o,"class","svelte-clhrbh"),p(l,"class","svelte-clhrbh"),p(n,"class","svelte-clhrbh")},m(t,a){i(t,n,a),c(n,o),o.checked=e[0],c(n,s),c(n,l),c(l,r),$||(g=h(o,"change",e[2]),$=!0)},p(t,[e]){1&e&&(o.checked=t[0]),2&e&&m(r,t[1])},i:t,o:t,d(t){t&&a(n),$=!1,g()}}}function Z(t,e,n){let{title:o}=e,{checked:s=!1}=e;return t.$$set=t=>{"title"in t&&n(1,o=t.title),"checked"in t&&n(0,s=t.checked)},[s,o,function(){s=this.checked,n(0,s)}]}class tt extends G{constructor(t){super(),H(this,t,Z,V,l,{title:1,checked:0})}}function et(t,e,n){const o=t.slice();return o[3]=e[n],o}function nt(t){let e,n,o,s;function l(){return t[2](t[3])}return{c(){e=u("button"),p(e,"name","color"),p(e,"type","radio"),p(e,"style",n=`background-color: ${t[3][1]};`),p(e,"class","svelte-5i7tqo"),g(e,"selected",t[0]===t[3][0])},m(t,n){i(t,e,n),o||(s=h(e,"click",l),o=!0)},p(o,s){t=o,2&s&&n!==(n=`background-color: ${t[3][1]};`)&&p(e,"style",n),3&s&&g(e,"selected",t[0]===t[3][0])},d(t){t&&a(e),o=!1,s()}}}function ot(e){let n,o=Array(...e[1].entries()),s=[];for(let t=0;t<o.length;t+=1)s[t]=nt(et(e,o,t));return{c(){n=u("div");for(let t=0;t<s.length;t+=1)s[t].c();p(n,"class","wrapper svelte-5i7tqo")},m(t,e){i(t,n,e);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,[e]){if(3&e){let l;for(o=Array(...t[1].entries()),l=0;l<o.length;l+=1){const r=et(t,o,l);s[l]?s[l].p(r,e):(s[l]=nt(r),s[l].c(),s[l].m(n,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=o.length}},i:t,o:t,d(t){t&&a(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(s,t)}}}function st(t,e,n){let{colors:o=[]}=e,{selectedId:s=0}=e;return t.$$set=t=>{"colors"in t&&n(1,o=t.colors),"selectedId"in t&&n(0,s=t.selectedId)},[s,o,t=>n(0,s=t[0])]}class lt extends G{constructor(t){super(),H(this,t,st,ot,l,{colors:1,selectedId:0})}}const rt=[];var ct={showSettings:{en:"Show settings",ru:"Показать настройки"},hideSettings:{en:"Hide settings",ru:"Скрыть настройки"},copyLink:{en:"Copy link",ru:"Копировать ссылку"},currentWorldSettings:{en:"Current world settings",ru:"Настройки мира"},simulationsPerFrame:{en:"Simulations per frame",ru:"Шагов симуляции за кадр"},temperature:{en:"Temperature",ru:"Температура"},friction:{en:"Friction",ru:"Трение"},killAllParticles:{en:"Kill all particles",ru:"Уничтожить все частицы"},newWorldSettings:{en:"New world settings",ru:"Настройки нового мира"},particleTypesAmount:{en:"Particle types amount",ru:"Кол-во видов (цветов) частиц"},particleCount:{en:"Particle count",ru:"Кол-во частиц"},createNewWorld:{en:"Create new world",ru:"Создать новый мир"},particleBrush:{en:"Particle brush",ru:"Кисть частиц"},graphicalSettings:{en:"Graphical settings",ru:"Настройки просмотра"},drawConnections:{en:"Draw connections",ru:"Отображать соединения"},particleRadius:{en:"Particle radius",ru:"Радиус частицы"}};const{window:it}=I;function at(e){let n,o,s;return{c(){n=u("button"),n.textContent=`${e[14](e[15],"showSettings")}`,p(n,"class","svelte-1s4knjn")},m(t,l){i(t,n,l),o||(s=h(n,"click",e[35]),o=!0)},p:t,i:t,o:t,d(t){t&&a(n),o=!1,s()}}}function ut(t){let e,n,s,l,r,f,m,$,g,y,x,b,v,w,_,C,M,S,j,E,A,N,q,L,O,I,B,H,G,D,K,X,Y,J,V,Z,et,nt,ot,st,rt,ct,it,at,ut,ft,dt,ht,pt,mt;function $t(e){t[26](e)}let gt={name:t[14](t[15],"simulationsPerFrame"),min:1,max:100};function yt(e){t[27](e)}void 0!==t[12]&&(gt.value=t[12]),y=new Q({props:gt}),k.push((()=>R(y,"value",$t)));let xt={name:t[14](t[15],"temperature"),min:.1,max:40,step:.1};function bt(e){t[28](e)}void 0!==t[5]&&(xt.value=t[5]),v=new Q({props:xt}),k.push((()=>R(v,"value",yt)));let vt={name:t[14](t[15],"friction"),min:0,max:1,step:.01};function wt(e){t[29](e)}void 0!==t[7]&&(vt.value=t[7]),C=new Q({props:vt}),k.push((()=>R(C,"value",bt)));let kt={name:t[14](t[15],"particleRadius"),min:3,max:10,step:.01};function _t(e){t[31](e)}void 0!==t[3]&&(kt.value=t[3]),j=new Q({props:kt}),k.push((()=>R(j,"value",wt)));let Ct={name:t[14](t[15],"particleTypesAmount"),min:1,max:t[16].length};function Mt(e){t[32](e)}void 0!==t[13]&&(Ct.value=t[13]),H=new Q({props:Ct}),k.push((()=>R(H,"value",_t)));let St={name:t[14](t[15],"particleCount"),min:0,max:5e3};function jt(e){t[33](e)}void 0!==t[4]&&(St.value=t[4]),K=new Q({props:St}),k.push((()=>R(K,"value",Mt)));let Pt={colors:t[16].slice(0,t[9].length)};function Et(e){t[34](e)}void 0!==t[6]&&(Pt.selectedId=t[6]),st=new lt({props:Pt}),k.push((()=>R(st,"selectedId",jt)));let At={title:t[14](t[15],"drawConnections")};return void 0!==t[8]&&(At.checked=t[8]),ft=new tt({props:At}),k.push((()=>R(ft,"checked",Et))),{c(){e=u("div"),n=u("div"),s=u("button"),s.textContent=`${t[14](t[15],"hideSettings")}`,l=d(),r=u("button"),r.textContent=`${t[14](t[15],"copyLink")}`,f=d(),m=u("div"),$=u("h2"),$.textContent=`${t[14](t[15],"currentWorldSettings")}`,g=d(),F(y.$$.fragment),b=d(),F(v.$$.fragment),_=d(),F(C.$$.fragment),S=d(),F(j.$$.fragment),A=d(),N=u("div"),q=u("button"),q.textContent=`${t[14](t[15],"killAllParticles")}`,L=d(),O=u("div"),I=u("h2"),I.textContent=`${t[14](t[15],"newWorldSettings")}`,B=d(),F(H.$$.fragment),D=d(),F(K.$$.fragment),Y=d(),J=u("div"),V=u("button"),V.textContent=`${t[14](t[15],"createNewWorld")}`,Z=d(),et=u("div"),nt=u("h2"),nt.textContent=`${t[14](t[15],"particleBrush")}`,ot=d(),F(st.$$.fragment),ct=d(),it=u("div"),at=u("h2"),at.textContent=`${t[14](t[15],"graphicalSettings")}`,ut=d(),F(ft.$$.fragment),p(s,"class","svelte-1s4knjn"),p(r,"class","svelte-1s4knjn"),p(n,"class","buttons-row svelte-1s4knjn"),p(e,"class","controls-block svelte-1s4knjn"),p($,"class","controls-block__title svelte-1s4knjn"),p(q,"class","svelte-1s4knjn"),p(N,"class","buttons-row svelte-1s4knjn"),p(m,"class","controls-block svelte-1s4knjn"),p(I,"class","controls-block__title svelte-1s4knjn"),p(V,"class","svelte-1s4knjn"),p(J,"class","buttons-row svelte-1s4knjn"),p(O,"class","controls-block svelte-1s4knjn"),p(nt,"class","controls-block__title svelte-1s4knjn"),p(et,"class","controls-block svelte-1s4knjn"),p(at,"class","controls-block__title svelte-1s4knjn"),p(it,"class","controls-block svelte-1s4knjn")},m(o,a){i(o,e,a),c(e,n),c(n,s),c(n,l),c(n,r),i(o,f,a),i(o,m,a),c(m,$),c(m,g),z(y,m,null),c(m,b),z(v,m,null),c(m,_),z(C,m,null),c(m,S),z(j,m,null),c(m,A),c(m,N),c(N,q),i(o,L,a),i(o,O,a),c(O,I),c(O,B),z(H,O,null),c(O,D),z(K,O,null),c(O,Y),c(O,J),c(J,V),i(o,Z,a),i(o,et,a),c(et,nt),c(et,ot),z(st,et,null),i(o,ct,a),i(o,it,a),c(it,at),c(it,ut),z(ft,it,null),ht=!0,pt||(mt=[h(s,"click",t[25]),h(r,"click",t[21]),h(q,"click",t[30]),h(V,"click",t[20])],pt=!0)},p(t,e){const n={};!x&&4096&e[0]&&(x=!0,n.value=t[12],P((()=>x=!1))),y.$set(n);const o={};!w&&32&e[0]&&(w=!0,o.value=t[5],P((()=>w=!1))),v.$set(o);const s={};!M&&128&e[0]&&(M=!0,s.value=t[7],P((()=>M=!1))),C.$set(s);const l={};!E&&8&e[0]&&(E=!0,l.value=t[3],P((()=>E=!1))),j.$set(l);const r={};!G&&8192&e[0]&&(G=!0,r.value=t[13],P((()=>G=!1))),H.$set(r);const c={};!X&&16&e[0]&&(X=!0,c.value=t[4],P((()=>X=!1))),K.$set(c);const i={};512&e[0]&&(i.colors=t[16].slice(0,t[9].length)),!rt&&64&e[0]&&(rt=!0,i.selectedId=t[6],P((()=>rt=!1))),st.$set(i);const a={};!dt&&256&e[0]&&(dt=!0,a.checked=t[8],P((()=>dt=!1))),ft.$set(a)},i(t){ht||(T(y.$$.fragment,t),T(v.$$.fragment,t),T(C.$$.fragment,t),T(j.$$.fragment,t),T(H.$$.fragment,t),T(K.$$.fragment,t),T(st.$$.fragment,t),T(ft.$$.fragment,t),ht=!0)},o(t){W(y.$$.fragment,t),W(v.$$.fragment,t),W(C.$$.fragment,t),W(j.$$.fragment,t),W(H.$$.fragment,t),W(K.$$.fragment,t),W(st.$$.fragment,t),W(ft.$$.fragment,t),ht=!1},d(t){t&&a(e),t&&a(f),t&&a(m),U(y),U(v),U(C),U(j),t&&a(L),t&&a(O),U(H),U(K),t&&a(Z),t&&a(et),U(st),t&&a(ct),t&&a(it),U(ft),pt=!1,o(mt)}}}function ft(t){let e,n,s,l,r,f,m,$,y;j(t[23]),n=new X({props:{width:t[0],height:t[1],fields:t[11],links:t[10],fw:t[17],fh:t[18],r:t[3],drawConnections:t[8],colors:t[16]}}),n.$on("click",t[24]);const x=[ut,at],b=[];function v(t,e){return t[2]?0:1}return r=v(t),f=b[r]=x[r](t),{c(){e=u("main"),F(n.$$.fragment),s=d(),l=u("div"),f.c(),p(l,"class","controls svelte-1s4knjn"),g(l,"controls_opened",t[2])},m(o,a){i(o,e,a),z(n,e,null),c(e,s),c(e,l),b[r].m(l,null),m=!0,$||(y=h(it,"resize",t[23]),$=!0)},p(t,e){const s={};1&e[0]&&(s.width=t[0]),2&e[0]&&(s.height=t[1]),2048&e[0]&&(s.fields=t[11]),1024&e[0]&&(s.links=t[10]),8&e[0]&&(s.r=t[3]),256&e[0]&&(s.drawConnections=t[8]),n.$set(s);let c=r;r=v(t),r===c?b[r].p(t,e):(O={r:0,c:[],p:O},W(b[c],1,1,(()=>{b[c]=null})),O.r||o(O.c),O=O.p,f=b[r],f?f.p(t,e):(f=b[r]=x[r](t),f.c()),T(f,1),f.m(l,null)),4&e[0]&&g(l,"controls_opened",t[2])},i(t){m||(T(n.$$.fragment,t),T(f),m=!0)},o(t){W(n.$$.fragment,t),W(f),m=!1},d(t){t&&a(e),U(n),b[r].d(),$=!1,y()}}}let dt=100;function ht(t,e){t.splice(t.indexOf(e),1)}function pt(e,n,o){let s;let c=window.innerWidth,i=window.innerHeight,a=new URLSearchParams(location.search).get("lang")||"en";let u=!0,f=Number(new URLSearchParams(location.search).get("radius"))||5,d=10,h=Number(new URLSearchParams(location.search).get("temperature"))||4,p=0,m=Number(new URLSearchParams(location.search).get("friction"))||.98,$=!0;const g=1e4;let y=c/dt+1,x=i/dt+1,b=3,v=[],w=[],k=[],_=[],C=[],M=function(e,n=t){let o;const s=new Set;function r(t){if(l(e,t)&&(e=t,o)){const t=!rt.length;for(const t of s)t[1](),rt.push(t,e);if(t){for(let t=0;t<rt.length;t+=2)rt[t][0](rt[t+1]);rt.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(l,c=t){const i=[l,c];return s.add(i),1===s.size&&(o=n(r)||t),l(e),()=>{s.delete(i),0===s.size&&(o(),o=null)}}}}(3);r(e,M,(t=>o(13,s=t)));let S=5;if(location.hash){let t=location.hash.substring(1).split("-"),e=0;j=M,s=~~t[e],P=s,j.set(P),b=s,E(),e++;for(let n=0;n<b;n++)v[n]=Number(t[e])>>2*n&3;e++;for(let n=0;n<b;n++){for(let o=0;o<b;o++)w[n][o]=(Number(t[e])>>2*o&3)-1;e++}for(let n=0;n<b;n++){for(let o=0;o<b;o++)k[n][o]=Number(t[e])>>2*o&3;e++}history.pushState(null,null," ")}else E();var j,P;function E(){o(6,p=0),function(){b=s,v=[],o(9,w=[]),k=[];for(let t=0;t<b;t++){v.push(~~(4*Math.random())),w.push([]),k.push([]);for(let e=0;e<b;e++)w[t].push(Math.floor(3*Math.random()-1)),k[t].push(~~(4*Math.random()))}}(),function(){o(10,_=[]),o(11,C=[]);for(let t=0;t<y;t++){C.push([]);for(let e=0;e<x;e++)C[t].push([])}for(let t=0;t<d;t++)A(Math.random()*c,Math.random()*i,~~(Math.random()*b))}()}function A(t,e,n){let o={x:t,y:e,type:n,sx:0,sy:0,bonds:[]};const s=Math.floor(t/dt),l=Math.floor(e/dt);C[s][l].push(o)}function N(t,e){const n=t.x-e.x,o=t.y-e.y;let s=n*n+o*o;if(s<g){let n=w[t.type][e.type]/s,o=w[e.type][t.type]/s;if(t.bonds.length<v[t.type]&&e.bonds.length<v[e.type]){if(s<2500&&-1===t.bonds.indexOf(e)&&-1===e.bonds.indexOf(t)){let n=0;t.bonds.forEach((t=>{t.type===e.type&&n++}));let o=0;e.bonds.forEach((e=>{e.type===t.type&&o++})),n<k[t.type][e.type]&&o<k[e.type][t.type]&&function(t,e){t.bonds.push(e),e.bonds.push(t),_.push({a:t,b:e})}(t,e)}}else-1===t.bonds.indexOf(e)&&-1===e.bonds.indexOf(t)&&(n=1/s,o=1/s);const l=Math.atan2(t.y-e.y,t.x-e.x);s<1&&(s=1),s<f*f*4&&(n=1/s,o=1/s),t.sx+=Math.cos(l)*n*h,t.sy+=Math.sin(l)*n*h,e.sx-=Math.cos(l)*o*h,e.sy-=Math.sin(l)*o*h}}function q(){for(let t=0;t<y;t++)for(let e=0;e<x;e++){const n=C[t][e];for(let t=0;t<n.length;t++){const e=n[t];e.x+=e.sx,e.y+=e.sy,e.sx*=m,e.sy*=m;const o=Math.sqrt(e.sx*e.sx+e.sy*e.sy);o>1&&(e.sx/=o,e.sy/=o),e.x<10?(e.sx+=.05*h,e.x<0&&(e.x=-e.x,e.sx*=-.5)):e.x>c-10&&(e.sx-=.05*h,e.x>c&&(e.x=2*c-e.x,e.sx*=-.5)),e.y<10?(e.sy+=.05*h,e.y<0&&(e.y=-e.y,e.sy*=-.5)):e.y>i-10&&(e.sy-=.05*h,e.y>i&&(e.y=2*i-e.y,e.sy*=-.5))}}for(let t=0;t<_.length;t++){const e=_[t],n=e.a,o=e.b,s=n.x-o.x,l=n.y-o.y;let r=s*s+l*l;if(r>2500)ht(n.bonds,o),ht(o.bonds,n),ht(_,e),t--;else if(r>f*f*4){const t=Math.atan2(n.y-o.y,n.x-o.x),e=-.015;n.sx+=Math.cos(t)*e*h,n.sy+=Math.sin(t)*e*h,o.sx-=Math.cos(t)*e*h,o.sy-=Math.sin(t)*e*h}}for(let t=0;t<y;t++)for(let e=0;e<x;e++){const n=C[t][e];for(let o=0;o<n.length;o++){const s=n[o],l=Math.floor(s.x/dt),r=Math.floor(s.y/dt);l===t&&r===e||(ht(n,s),C[l][r].push(s))}}for(let t=0;t<y;t++)for(let e=0;e<x;e++){const n=C[t][e];for(let o=0;o<n.length;o++){const s=n[o];for(let t=o+1;t<n.length;t++){N(s,n[t])}if(t<y-1){const n=C[t+1][e];for(let t=0;t<n.length;t++){N(s,n[t])}}if(e<x-1){const n=e+1,o=C[t][n];for(let t=0;t<o.length;t++){N(s,o[t])}if(t<y-1){const e=C[t+1][n];for(let t=0;t<e.length;t++){N(s,e[t])}}}}}}requestAnimationFrame((function t(){for(let t=0;t<S;t++)q();o(11,C=[...C]),window.requestAnimationFrame(t)}));return[c,i,u,f,d,h,p,m,$,w,_,C,S,s,function(t,e){const n=ct[e];return Object.keys(n).includes(t)?n[t]:n.en},a,["#fa1414","#c88c64","#50aa8c","#0096e6","#0a14e6","#8200c8","#fa96d2","#828282","green","white"],y,x,M,E,function(){let t="";t+=b;let e=0;for(let t=0;t<b;t++)e|=v[t]<<2*t;t+="-"+e;for(let e=0;e<b;e++){let n=0;for(let t=0;t<b;t++)n|=w[e][t]+1<<2*t;t+="-"+n}for(let e=0;e<b;e++){let n=0;for(let t=0;t<b;t++)n|=k[e][t]<<2*t;t+="-"+n}t=window.location.href+"#"+t;let n=document.createElement("input");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)},A,function(){o(0,c=it.innerWidth),o(1,i=it.innerHeight)},t=>{A(t.clientX+Math.random()-.5,t.clientY+Math.random()-.5,p)},()=>o(2,u=!1),function(t){S=t,o(12,S)},function(t){h=t,o(5,h)},function(t){m=t,o(7,m)},function(t){f=t,o(3,f)},()=>{o(11,C=[]);for(let t=0;t<y;t++){C.push([]);for(let e=0;e<x;e++)C[t].push([])}o(10,_=[])},function(t){s=t,M.set(s)},function(t){d=t,o(4,d)},function(t){p=t,o(6,p)},function(t){$=t,o(8,$)},()=>o(2,u=!0)]}return new class extends G{constructor(t){super(),H(this,t,pt,ft,l,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
